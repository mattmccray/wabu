(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;c=require("fs"),i=require("path"),d=require("coffee-script/helpers").helpers,h=require("coffee-script/optparse"),a=require("coffee-script"),b=require("sys"),k=b.puts,m={},g={},l=[],f=null,d.extend(global,{task:function(a,b,c){var d;c||(d=[b,c],c=d[0],b=d[1]);return m[a]={name:a,description:b,action:c}},option:function(a,b,c){return l.push([a,b,c])},invoke:function(a){m[a]||e(a);return m[a].action(g)}}),exports.run=function(b,d){b||(b="cake");return i.exists("Cakefile",function(e){var i,k,m,n,o,p;if(!(e||d))throw new Error("Cakefile not found in "+process.cwd());p=process.argv.slice(2,process.argv.length),e&&a.run(c.readFileSync("Cakefile").toString(),{fileName:"Cakefile"}),f=new h.OptionParser(l);if(!p.length)return j(b);g=f.parse(p),n=[],m=g.arguments;for(i=0,k=m.length;i<k;i++)o=m[i],n.push(invoke(o));return n})},j=function(a){var b,c,d,e,g;k(""),b=m;for(d in b)g=b[d],e=20-d.length,e=e>0?Array(e+1).join(" "):"",c=g.description?"# "+g.description:"",k(""+a+" "+d+e+" "+c);if(l.length)return k(f.help())},e=function(a){k("No such task: \""+a+"\"");return process.exit(1)}}).call(this)